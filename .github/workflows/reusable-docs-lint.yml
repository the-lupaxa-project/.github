name: Reusable Documentation Lint (Markdown + YAML)

on:
  workflow_call:
    inputs:
      md_globs:
        description: "Glob(s) / patterns for Markdown files (comma-separated)"
        required: false
        type: string
      yml_globs:
        description: "Glob(s) / patterns for YAML files (comma-separated)"
        required: false
        type: string
      exclude_files:
        description: >
          Optional comma-separated list of regex patterns to exclude from all lint steps.
        required: false
        type: string

      report_only:
        description: "Do not fail the build even if errors occur"
        required: false
        type: boolean
        default: false

      show_errors:
        description: "Show detailed error output"
        required: false
        type: boolean
        default: true

      show_skipped:
        description: "Show skipped / ignored files in the output"
        required: false
        type: boolean
        default: false

      no_color:
        description: "Disable ANSI colours."
        required: false
        type: boolean
        default: false

permissions:
  contents: read

jobs:
  markdown-lint:
    name: Markdown Lint
    uses: ./.github/workflows/reusable-markdown-lint.yml
    with:
      include_files: ${{ inputs.md_globs }}
      exclude_files: ${{ inputs.exclude_files }}
      report_only: ${{ inputs.report_only }}
      show_errors: ${{ inputs.show_errors }}
      show_skipped: ${{ inputs.show_skipped }}
      no_color: ${{ inputs.no_color }}
    secrets: inherit

  yaml-lint:
    name: YAML Lint
    uses: ./.github/workflows/reusable-yaml-lint.yml
    with:
      include_files: ${{ inputs.yml_globs }}
      exclude_files: ${{ inputs.exclude_files }}
      report_only: ${{ inputs.report_only }}
      show_errors: ${{ inputs.show_errors }}
      show_skipped: ${{ inputs.show_skipped }}
      no_color: ${{ inputs.no_color }}
    secrets: inherit
